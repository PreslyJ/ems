
  <!-- Bootstrap Core CSS -->
  <link href="<?php echo base_url('assets/css/bootstrap.css'); ?>" rel="stylesheet" type="text/css">

<!-- animate -->
<link href="<?php echo base_url('assets/css/animate.css'); ?>" rel="stylesheet" type="text/css">

<!-- MetisMenu CSS -->
<link href="<?php echo base_url('vendor/metisMenu/metisMenu.min.css'); ?>" rel="stylesheet" type="text/css">

<!-- Custom Fonts -->
<link href="<?php echo base_url('vendor/font-awesome/css/font-awesome.min.css'); ?>" rel="stylesheet" type="text/css">

<!-- datetimepicker -->
<link href = "<?php echo base_url('vendor/bootstrap-datetimepicker-master/build/css/bootstrap-datetimepicker.css'); ?>" rel="stylesheet" type="text/css">

<!-- selectpicker -->
<link href="<?php echo base_url('vendor/bootstrap-select-1.11.0/dist/css/bootstrap-select.min.css'); ?>" rel="stylesheet" type="text/css">

<!-- DataTables CSS -->
<link href="<?php  echo base_url('vendor/datatables-plugins/dataTables.bootstrap.css'); ?>" rel="stylesheet" type="text/css">
<link href="<?php  echo base_url('vendor/datatables/css/jquery.dataTables.css'); ?>" rel="stylesheet" type="text/css">

<!-- DataTables Responsive CSS -->
<link href="<?php  echo base_url('vendor/datatables-responsive/dataTables.responsive.css'); ?>" rel="stylesheet" type="text/css">

<!-- Social Buttons CSS -->
<link href="<?php  echo base_url('vendor/bootstrap-social/bootstrap-social.css'); ?>" rel="stylesheet" type="text/css">

<!-- iCheck -->
<link href="<?php echo base_url('vendor/iCheck/_all.css'); ?>" rel = "stylesheet" type="text/css">

<!-- Switchery -->
<link href="<?php echo base_url('vendor/switchery/switchery.css'); ?>" rel = "stylesheet" type="text/css">

<!-- Toastr Notifications -->
<link href="<?php echo base_url('vendor/toastr-master/build/toastr.min.css'); ?>" rel = "stylesheet" type="text/css">

<!-- front-end validation -->
<link href="<?php echo base_url('vendor/jQuery-Form-Validator-master/form-validator/theme-default.min.css') ?>" rel="stylesheet" type="text/css">

<!-- Full Calendar -->
<link href="<?php echo base_url('vendor/fullcalendar-3.0.0/fullcalendar.css') ?>" rel="stylesheet" type="text/css">

<!-- Custom CSS -->
<link href="<?php echo base_url('dist/css/sb-admin-2.css'); ?>" rel="stylesheet" type="text/css">
<link href="<?php echo base_url('assets/css/custom_style.css'); ?>" rel="stylesheet" type="text/css">


<script src="<?php echo base_url('js/jspdf/jspdf.js'); ?>"></script>

<script src="<?php echo base_url('js/html2canvas/html2canvas.js'); ?>"></script>


  <!-- moment -->
   <script src="<?php echo base_url('assets/js/moment.js'); ?>"></script>
    
    <!-- jQuery -->
    <script src="<?php echo base_url('assets/js/jquery.min.js'); ?>"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="<?php echo base_url('assets/js/bootstrap.min.js'); ?>"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="<?php echo base_url('vendor/metisMenu/metisMenu.min.js'); ?>"></script>

    <!-- DataTables JavaScript -->
    <script src="<?php echo base_url('vendor/datatables/js/jquery.dataTables.js'); ?>"></script>
    <script src="<?php echo base_url('vendor/datatables-plugins/dataTables.bootstrap.js'); ?>"></script>
    <script src="<?php echo base_url('vendor/datatables-responsive/dataTables.responsive.js'); ?>"></script>

    <!-- datetimepicker -->
    <script src="<?php echo base_url('vendor/bootstrap-datetimepicker-master/build/js/bootstrap-datetimepicker.min.js'); ?>"></script>

    <!-- selectpicker -->
    <script src="<?php echo base_url('vendor/bootstrap-select-1.11.0/dist/js/bootstrap-select.js'); ?>"></script>

    <!-- Morris Charts JavaScript -->
    <!-- <script src="<?php //echo base_url('vendor/raphael/raphael.min.js'); ?>"></script>
    <script src="<?php //echo base_url('vendor/morrisjs/morris.min.js'); ?>"></script>
    <script src="<?php //echo base_url('data/morris-data.js'); ?>"></script> -->

    <!-- Flot Charts JavaScript -->
    <!-- <script src="<?php //echo base_url('vendor/flot/excanvas.min.js'); ?>"></script>
    <script src="<?php //echo base_url('vendor/flot/jquery.flot.js'); ?>"></script>
    <script src="<?php //echo base_url('vendor/flot/jquery.flot.pie.js'); ?>"></script>
    <script src="<?php //echo base_url('vendor/flot/jquery.flot.resize.js'); ?>"></script>
    <script src="<?php //echo base_url('vendor/flot/jquery.flot.time.js'); ?>"></script>
    <script src="<?php //echo base_url('vendor/flot-tooltip/jquery.flot.tooltip.min.js'); ?>"></script>
    <script src="<?php //echo base_url('data/flot-data.js'); ?>"></script> -->

    <!-- iCheck -->
    <script src="<?php echo base_url('vendor/iCheck/icheck.min.js') ?>"></script>

    <!-- switchery -->
    <script src="<?php echo base_url('vendor/switchery/switchery.js') ?>"></script>

    <!-- Toastr Notifications -->
    <script src="<?php echo base_url('vendor/toastr-master/build/toastr.min.js') ?>"></script>

    <!-- Slimscroll -->
    <!-- <script src="<?php //echo base_url('vendor/slimscroll/jquery.slimscroll.js') ?>"></script> -->

    <!-- fromt-end Validation -->
    <script src="<?php echo base_url('vendor/jQuery-Form-Validator-master/form-validator/jquery.form-validator.min.js') ?>"></script>

    <!-- Full Calendar -->
    <script src="<?php echo base_url('vendor/fullcalendar-3.0.0/fullcalendar.js') ?>"></script>
    
    <!-- Custom Theme JavaScript -->
    <script src="<?php echo base_url('dist/js/sb-admin-2.js'); ?>"></script>





<div class = "row">
   
</div>
<!-- /.row -->

<div  id="testpdf" class = "wrapper animated fadeInRight">
    <div class="row">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <!-- <div class = "col-md-5"> -->
                    <!-- <h4 class="panel-title">
                        <a data-toggle="collapse" href="#ent_collapse">Event Checklist Lookup <small class = "text-white"> Showing all checklists of selected event</small></a>
                    </h4> -->
                <!-- </div> -->
                <!-- <div class = "col-md-7"> -->
            
                <!-- </div> -->
            </div>
            <div id="ent_collapse" class="panel-collapse collapse in">
                <div class="panel-body">
                    <form class = "form-inline" id = "sup_form">

                       
							<!-- <div class = "hr-line-dashed"></div> -->

                        <div >
                            <table id = "checklist_table" class = "table table-bordered table-hover table-striped compact">
                                <thead>
                                    <tr>
                                        <th class = "text-center">#</th>
                                        <th class = "text-center">Checklist Item</th>
                                        <th class = "text-center">Deadline</th>
                                        <th class = "text-center">Completed On</th>
                                        <th class = "text-center">Incharge</th>
                                        <th class = "text-center">Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                   <tr>
                                        <th class = "text-center">1</th>
                                        <th class = "text-center">1</th>
                                        <th class = "text-center">2</th>
                                        <th class = "text-center">asd</th>
                                        <th class = "text-center">dasdas</th>
                                        <th class = "text-center">adsadsad</th>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- /.row -->
</div>
<!-- /.wrapper -->
<button onclick="print(1)" >Print</button>


<script type="text/javascript">

var checklist_table = null;
var uri_ent_id      = "<?php echo $event_id; ?>";

$(document).ready(function()
{


    checklist_table = $('#checklist_table').dataTable( //datatable initialization
    {
        'dom': '<"top">rt<"bottom"p><"clear">', //setting up DOM elements. only the table and pagination is included here
        'bSort': false, //soritng turned off
        'iDisplayLength' : -1, //maximum display no. for one page
        'responsive' : false,
		'paging': false,
         'autoWidth' : false,
        'sAjaxSource': '<?php echo site_url("transaction/checklist/fetch_lp_checklists")?>', //url for fetching data for the table
        'fnServerData': function(sSource, aoData, fnCallback, oSettings){
        $.ajax({
            "dataType": 'json',
            "type": "POST",
            "url": sSource,
            "data": aoData,
            "success": fnCallback
        })},
        'fnServerParams' : function(aoData) //parameters that need to be passed
        {
            aoData.push({'name' : 'id', 'value' : uri_ent_id});
            aoData.push({'name' : 'from', 'value' : ''});
            aoData.push({'name' : 'to', 'value' : ''});
            aoData.push({'name' : 'employee', 'value' : ''});
        },
        'aoColumns': [ //assigned fetched data to columns
            { "mData": 'index', "sClass": "text-center"},
            { "mData": "item"},
            { "mData": "ckl_deadline"},
            { "mData": "completed"},
            { "mData": "assigned_name"},
            { "mData": "status", "sClass": "text-center"},
        ],
        "createdRow" : function(row, data, rowIndex, colIndex) //after rows created
        { 
            if(data.status == "On Progress")
                jQuery('td:eq(5)', row).css('background-color', '#ADF7F8');
            if(data.status == "Completed")
                jQuery('td:eq(5)', row).css('background-color', '#C7FFBC');
        },
        "drawCallback": function ( settings ) //after drawing table
        {
            //grouping is done activity wise
            var api   = this.api(); //getting current instance of datatable
            var group = null;
            var rows  = api.rows( {page:'current', order:'current'} ).nodes();


            api.rows({page:"current", order:'current'}).data().each(function(r,i) //looping through all rows
            {
                if(group !== r['activity']) //if new activity
                {
                    $(rows).eq(i).before('<tr class = "group info"><th colspan="6">Activity : '+r['activity']+' | Deadline : '+r['deadline']+'</th></tr>');

                    group =  r['activity'];
                }

            });

        }
    });


	checklist_table.api().ajax.reload();
});


function print() {
		const filename  = 'ThisIsYourPDFFilename.pdf';

		html2canvas(document.querySelector('#testpdf')).then(canvas => {
			var pdf = new jsPDF('p', 'mm', 'a4');
			pdf.addImage(canvas.toDataURL('image/png'), 'PNG', 0, 0, 211, 298);
			pdf.save(filename);
		});
	}

// Variant
// This one lets you improve the PDF sharpness by scaling up the HTML node tree to render as an image before getting pasted on the PDF.
function print(quality = 1) {
		const filename  = 'ThisIsYourPDFFilename.pdf';

		html2canvas(document.querySelector('#testpdf'), 
								{scale: quality}
						 ).then(canvas => {
			var pdf = new jsPDF('p', 'mm', 'a4');
			pdf.addImage(canvas.toDataURL('image/png'), 'PNG', 0, 0, 211, 298);
			pdf.save(filename);
		});
	}


</script>
